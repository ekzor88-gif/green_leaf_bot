# üåø GreenLeaf AI-–ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç

–¢–µ–ª–µ–≥—Ä–∞–º-–±–æ—Ç –Ω–∞ –±–∞–∑–µ AI, —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π –¥–ª—è –∫–æ–Ω—Å—É–ª—å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤ –ø–æ –ø—Ä–æ–¥—É–∫—Ç–∞–º –∫–æ–º–ø–∞–Ω–∏–∏ GreenLeaf. –ë–æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç RAG (Retrieval-Augmented Generation) –¥–ª—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Ç–æ—á–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ –∫–∞—Ç–∞–ª–æ–≥–∞ –ø—Ä–æ–¥—É–∫—Ü–∏–∏.

## üöÄ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

*   **ü§ñ –£–º–Ω—ã–π –¥–∏–∞–ª–æ–≥:** –ü–æ–Ω–∏–º–∞–µ—Ç –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —è–∑—ã–∫, –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –æ —Ç–æ–≤–∞—Ä–∞—Ö, –∏—Ö –Ω–∞–ª–∏—á–∏–∏ –∏ —Å–≤–æ–π—Å—Ç–≤–∞—Ö.
*   **üîç –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫:** –ù–∞—Ö–æ–¥–∏—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã, –¥–∞–∂–µ –µ—Å–ª–∏ –∑–∞–ø—Ä–æ—Å —Å—Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞–Ω –Ω–µ—Ç–æ—á–Ω–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ —Å–∏–º–ø—Ç–æ–º–∞–º –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞–º).
*   **üìö –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º:** –ó–∞–ø–æ–º–∏–Ω–∞–µ—Ç –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ –¥–ª—è —É—Ç–æ—á–Ω—è—é—â–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ ("–∞ —Å–∫–æ–ª—å–∫–æ —Å—Ç–æ–∏—Ç –≤—Ç–æ—Ä–æ–π?").
*   **üñºÔ∏è –ö–∞—Ä—Ç–æ—á–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤:** –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–æ–¥—É–∫—Ç–µ, –≤–∫–ª—é—á–∞—è —Ñ–æ—Ç–æ, –æ–ø–∏—Å–∞–Ω–∏–µ –∏ —Ü–µ–Ω—É.
*   **‚öôÔ∏è –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –Ω–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–∑—ã:** –°–∫—Ä–∏–ø—Ç –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ –∫–∞—Ç–∞–ª–æ–≥–∞ –∏–∑ `.docx` —Ñ–∞–π–ª–∞, –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ —Å–æ–∑–¥–∞–Ω–∏—è –≤–µ–∫—Ç–æ—Ä–Ω—ã—Ö –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–π.

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

*   **–ë–æ—Ç:** Python, aiogram 3.x
*   **AI/LLM:** OpenAI API (GPT-4o-mini, text-embedding-3-small)
*   **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** Supabase (PostgreSQL + pgvector)
*   **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:** Retrieval-Augmented Generation (RAG)

---

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

–°–ª–µ–¥—É–π—Ç–µ —ç—Ç–∏–º —à–∞–≥–∞–º –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞.

### –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

1.  **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:**
    ```bash
    git clone https://github.com/ekzor88-gif/nadin_green_leaf_consult_bot.git
    cd nadin_green_leaf_consult_bot
    ```

2.  **–°–æ–∑–¥–∞–π—Ç–µ –∏ –∞–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:**
    ```bash
    # –î–ª—è Windows
    python -m venv venv
    venv\Scripts\activate

    # –î–ª—è macOS/Linux
    python3 -m venv venv
    source venv/bin/activate
    ```

3.  **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
    ```bash
    pip install -r requirements.txt
    ```

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Supabase

1.  **–°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç** –≤ Supabase.
2.  –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Database** -> **Extensions** –∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ `vector` –≤–∫–ª—é—á–µ–Ω–æ.
3.  –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **SQL Editor**, —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å, —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤ –Ω–µ–≥–æ –≤—Å—ë —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `schema.sql` –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –µ–≥–æ.
4.  –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Storage**, —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π **Public** –±–∞–∫–µ—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å –∏–º–µ–Ω–µ–º `products`).

### –®–∞–≥ 3: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

1.  **–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env`** –≤ –∫–æ—Ä–Ω–µ–≤–æ–π –ø–∞–ø–∫–µ –ø—Ä–æ–µ–∫—Ç–∞.
2.  **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ** –≤ –Ω–µ–≥–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –Ω–∏–∂–µ –∏ –ø–æ–¥—Å—Ç–∞–≤—å—Ç–µ —Å–≤–æ–∏ –∑–Ω–∞—á–µ–Ω–∏—è:

    ```env
    # –¢–æ–∫–µ–Ω –≤–∞—à–µ–≥–æ Telegram-–±–æ—Ç–∞ –æ—Ç @BotFather
    TELEGRAM_TOKEN="12345:ABC-DEF12345"

    # –ö–ª—é—á–∏ –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ Supabase (–ù–∞—Å—Ç—Ä–æ–π–∫–∏ -> API)
    SUPABASE_URL="https://your-project-id.supabase.co"
    SUPABASE_KEY="your-anon-key"

    # –ö–ª—é—á OpenAI API
    OPENAI_API_KEY="sk-..."

    # –ò–º—è –±–∞–∫–µ—Ç–∞ –≤ Supabase Storage, –∫–æ—Ç–æ—Ä—ã–π –≤—ã —Å–æ–∑–¥–∞–ª–∏
    SUPABASE_BUCKET="products"

    # –ò–º—è —Ñ–∞–π–ª–∞ —Å –∫–∞—Ç–∞–ª–æ–≥–æ–º –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞
    DOCX_FILE="catalog.docx"
    ```

### –®–∞–≥ 4: –ù–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

1.  **–ü–æ–º–µ—Å—Ç–∏—Ç–µ —Ñ–∞–π–ª `catalog.docx`** —Å –∫–∞—Ç–∞–ª–æ–≥–æ–º —Ç–æ–≤–∞—Ä–æ–≤ –≤ –∫–æ—Ä–Ω–µ–≤—É—é –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞.

2.  **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –ø–∞—Ä—Å–∏–Ω–≥–∞.** –û–Ω –∏–∑–≤–ª–µ—á–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ `.docx`, –∑–∞–≥—Ä—É–∑–∏—Ç –∫–∞—Ä—Ç–∏–Ω–∫–∏ –≤ Supabase Storage –∏ –¥–æ–±–∞–≤–∏—Ç —Ç–æ–≤–∞—Ä—ã –≤ –±–∞–∑—É.
    ```bash
    python update_catalog.py
    ```

3.  **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤.** –û–Ω —Å–æ–∑–¥–∞—Å—Ç —Ç–µ–≥–∏ –¥–ª—è –ø–æ–∏—Å–∫–∞ –∏ –≤–µ–∫—Ç–æ—Ä–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –¥–ª—è –≤—Å–µ—Ö —Ç–æ–≤–∞—Ä–æ–≤ –≤ –±–∞–∑–µ.
    ```bash
    python embeddings.py
    ```
    > **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –î–ª—è –ø–æ–ª–Ω–æ–π –ø–µ—Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≤—Å–µ—Ö —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ (–¥–∞–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö) –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–ª–∞–≥ `--force`: `python embeddings.py --force`.

### –®–∞–≥ 5: –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –±–æ—Ç–∞:

```bash
python bot.py
```

–¢–µ–ø–µ—Ä—å –±–æ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ–Ω–ª–∞–π–Ω –∏ –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ!